<template>
  <q-page class="bg-white">
    <!-- Hero Section -->
    <div class="hero-section">
      <div class="container">
        <!-- Large Icon -->
        <div class="hero-icon">
          <div class="icon-wrapper">
            <q-icon name="computer" size="48px" color="white" />
          </div>
        </div>

        <!-- Main Title -->
        <div class="hero-title">
          <h1 class="main-title">H·ªçc Ti·∫øng Anh Th√¥ng Qua</h1>
          <h1 class="sub-title">Tr√≤ Chuy·ªán AI</h1>
        </div>

        <!-- Description -->
        <p class="hero-description">
          Kh√°m ph√° c√°ch h·ªçc tiÔøΩÔøΩng Anh hi·ªáu qu·∫£ nh·∫•t v·ªõi AI chatbot th√¥ng minh,
          th√°ch ƒë·∫•u b·∫°n b√® v√† h·ªá th·ªëng ph·∫ßn th∆∞·ªüng h·∫•p d·∫´n.
        </p>

        <!-- CTA Buttons -->
        <div class="cta-buttons">
          <q-btn class="primary-btn" @click="showRegister">
            <q-icon name="auto_awesome" class="q-mr-sm" />
            B·∫Øt ƒê·∫ßu Mi·ªÖn Ph√≠
            <q-icon name="arrow_forward" class="q-ml-sm" />
          </q-btn>

          <q-btn class="secondary-btn" @click="showLogin">
            <q-icon name="play_arrow" class="q-mr-sm" />
            ƒêƒÉng Nh·∫≠p
          </q-btn>
        </div>

        <!-- Stats -->
        <div class="stats-section">
          <div class="stat-item">
            <div class="stat-icon">
              <q-icon name="people" size="20px" />
            </div>
            <div class="stat-number">10,000+</div>
            <div class="stat-label">Ng∆∞·ªùi h·ªçc</div>
          </div>

          <div class="stat-item">
            <div class="stat-icon">
              <q-icon name="quiz" size="20px" />
            </div>
            <div class="stat-number">50,000+</div>
            <div class="stat-label">C√¢u h·ªèi</div>
          </div>

          <div class="stat-item">
            <div class="stat-icon">
              <q-icon name="star" size="20px" />
            </div>
            <div class="stat-number">95%</div>
            <div class="stat-label">H√†i l√≤ng</div>
          </div>

          <div class="stat-item">
            <div class="stat-icon">
              <q-icon name="schedule" size="20px" />
            </div>
            <div class="stat-number">24/7</div>
            <div class="stat-label">H·ªó tr·ª£</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Features Section -->
    <div class="features-section">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">T·∫°i Sao Ch·ªçn Lingo?</h2>
          <p class="section-description">
            Nh·ªØng t√≠nh nƒÉng ƒë·ªôc ƒë√°o gi√∫p b·∫°n h·ªçc ti·∫øng Anh hi·ªáu qu·∫£ v√† th√∫ v·ªã
            h∆°n bao gi·ªù h·∫øt
          </p>
        </div>

        <div class="features-grid">
          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="smart_toy" size="32px" />
              </div>
              <h3 class="feature-title">AI Chatbot Th√¥ng Minh</h3>
              <p class="feature-description">
                H·ªçc ti·∫øng Anh qua tr√≤ chuy·ªán t·ª± nhi√™n v·ªõi AI bot ƒë∆∞·ª£c thi·∫øt k·∫ø
                ƒë·∫∑c bi·ªát
              </p>
            </q-card-section>
          </q-card>

          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="people" size="32px" />
              </div>
              <h3 class="feature-title">Th√°ch ƒê·∫•u B·∫°n B√®</h3>
              <p class="feature-description">
                C·∫°nh tranh v·ªõi b·∫°n b√® trong c√°c cu·ªôc thi ti·∫øng Anh th√∫ v·ªã v√† h·∫•p
                d·∫´n
              </p>
            </q-card-section>
          </q-card>

          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="emoji_events" size="32px" />
              </div>
              <h3 class="feature-title">H·ªá Th·ªëng X·∫øp H·∫°ng</h3>
              <p class="feature-description">
                Theo d√µi ti·∫øn b·ªô v√† c·∫°nh tranh v·ªõi h√†ng ngh√¨n ng∆∞·ªùi h·ªçc kh√°c
              </p>
            </q-card-section>
          </q-card>

          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="target" size="32px" />
              </div>
              <h3 class="feature-title">Nhi·ªám V·ª• H√†ng Ng√†y</h3>
              <p class="feature-description">
                Ho√†n th√†nh c√°c nhi·ªám v·ª• ƒë·ªÉ duy tr√¨ ƒë·ªông l·ª±c v√† nh·∫≠n ph·∫ßn th∆∞·ªüng
              </p>
            </q-card-section>
          </q-card>

          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="redeem" size="32px" />
              </div>
              <h3 class="feature-title">ƒê·ªïi Th∆∞·ªüng H·∫•p D·∫´n</h3>
              <p class="feature-description">
                Quy ƒë·ªïi ƒëi·ªÉm th√†nh th·∫ª c√†o ƒëi·ªán tho·∫°i v√† nhi·ªÅu ph·∫ßn qu√† kh√°c
              </p>
            </q-card-section>
          </q-card>

          <q-card class="feature-card">
            <q-card-section class="feature-content">
              <div class="feature-icon">
                <q-icon name="analytics" size="32px" />
              </div>
              <h3 class="feature-title">Th·ªëng K√™ Chi Ti·∫øt</h3>
              <p class="feature-description">
                Theo d√µi chi ti·∫øt qu√° tr√¨nh h·ªçc t·∫≠p v·ªõi bi·ªÉu ƒë·ªì v√† b√°o c√°o
              </p>
            </q-card-section>
          </q-card>
        </div>
      </div>
    </div>

    <!-- How It Works Section -->
    <div class="how-it-works-section">
      <div class="container">
        <div class="section-header">
          <h2 class="section-title">C√°ch Th·ª©c Ho·∫°t ƒê·ªông</h2>
          <p class="section-description">
            Ch·ªâ 3 b∆∞·ªõc ƒë∆°n gi·∫£n ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh h·ªçc ti·∫øng Anh
          </p>
        </div>

        <div class="steps-container">
          <div class="step-item">
            <div class="step-number">1</div>
            <h3 class="step-title">ƒêƒÉng K√Ω Mi·ªÖn Ph√≠</h3>
            <p class="step-description">
              T·∫°o t√†i kho·∫£n ch·ªâ trong 30 gi√¢y v·ªõi email ho·∫∑c s·ªë ƒëi·ªán tho·∫°i
            </p>
          </div>

          <div class="step-item">
            <div class="step-number">2</div>
            <h3 class="step-title">B·∫Øt ƒê·∫ßu Chat</h3>
            <p class="step-description">
              Tr√≤ chuy·ªán v·ªõi AI bot v√† tr·∫£ l·ªùi c√°c c√¢u h·ªèi ti·∫øng Anh th√∫ v·ªã
            </p>
          </div>

          <div class="step-item">
            <div class="step-number">3</div>
            <h3 class="step-title">Nh·∫≠n Ph·∫ßn Th∆∞·ªüng</h3>
            <p class="step-description">
              T√≠ch l≈©y ƒëi·ªÉm v√† ƒë·ªïi l·∫•y th·∫ª c√†o, qu√† t·∫∑ng h·∫•p d·∫´n
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Login Dialog -->
    <q-dialog v-model="showLoginDialog" persistent>
      <q-card style="min-width: 400px" class="q-pa-md">
        <q-card-section>
          <div class="text-h6 text-center">üöÄ ƒêƒÉng nh·∫≠p EnglishBot</div>
          <div class="text-subtitle2 text-center text-grey-6">
            Ch√†o m·ª´ng b·∫°n tr·ªü l·∫°i! H√£y ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c h·ªçc t·∫≠p.
          </div>
        </q-card-section>

        <q-card-section>
          <!-- Test Button -->
          <div class="q-mb-md">
            <q-btn
              color="red"
              label="TEST CLICK"
              class="full-width"
              @click="testClick"
            />
          </div>

          <!-- Demo Login Button -->
          <div class="q-mb-lg">
            <q-btn
              color="primary"
              label="üöÄ ƒêƒÉng nh·∫≠p Demo (Ph∆∞·ªõc Th√¥ng)"
              class="full-width q-py-sm"
              @click="doLogin"
            />
            <div class="text-center q-mt-sm text-caption text-grey-6">
              Click ƒë·ªÉ ƒëƒÉng nh·∫≠p nhanh
            </div>
          </div>
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="H·ªßy" @click="showLoginDialog = false" />
          <q-btn
            flat
            label="Chuy·ªÉn sang ƒêƒÉng k√Ω"
            color="primary"
            @click="switchToRegister"
          />
        </q-card-actions>
      </q-card>
    </q-dialog>

    <!-- Register Dialog -->
    <q-dialog v-model="showRegisterDialog" persistent>
      <q-card style="min-width: 400px" class="q-pa-md">
        <q-card-section>
          <div class="text-h6 text-center">‚ú® ƒêƒÉng k√Ω EnglishBot</div>
          <div class="text-subtitle2 text-center text-grey-6">
            T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu h√†nh tr√¨nh h·ªçc ti·∫øng Anh!
          </div>
        </q-card-section>

        <q-card-section>
          <!-- Demo Register Button -->
          <div class="q-mb-lg">
            <q-btn
              color="primary"
              label="‚ú® ƒêƒÉng k√Ω Demo (Ph∆∞·ªõc Th√¥ng)"
              class="full-width q-py-sm"
              @click="
                handleRegister({
                  name: 'Ph∆∞·ªõc Th√¥ng',
                  email: 'phuocthoang@demo.com',
                })
              "
            />
            <div class="text-center q-mt-sm text-caption text-grey-6">
              Click ƒë·ªÉ t·∫°o t√†i kho·∫£n demo
            </div>
          </div>
        </q-card-section>

        <q-card-actions align="right">
          <q-btn flat label="H·ªßy" @click="showRegisterDialog = false" />
          <q-btn
            flat
            label="ƒê√£ c√≥ t√†i kho·∫£n? ƒêƒÉng nh·∫≠p"
            color="primary"
            @click="switchToLogin"
          />
        </q-card-actions>
      </q-card>
    </q-dialog>
  </q-page>
</template>

<script setup lang="ts">
import { ref } from "vue";
import { useRouter } from "vue-router";
import { useQuasar } from "quasar";
import { useAuthStore } from "../stores/auth";

const authStore = useAuthStore();
const router = useRouter();
const $q = useQuasar();

// Local state for dialogs
const showLoginDialog = ref(false);
const showRegisterDialog = ref(false);

const showLogin = () => {
  console.log("IndexPage: Show login clicked!");
  showRegisterDialog.value = false;
  showLoginDialog.value = true;
};

const showRegister = () => {
  console.log("IndexPage: Show register clicked!");
  showLoginDialog.value = false;
  showRegisterDialog.value = true;
};

const handleLogin = (userData: { name: string; email: string }) => {
  console.log("IndexPage: Login handler called with:", userData);
  authStore.login(userData);
  showLoginDialog.value = false;
  $q.notify({
    type: "positive",
    message: `Ch√†o m·ª´ng ${userData.name}!`,
    position: "top",
  });
  router.push("/chat");
};

const handleRegister = (userData: { name: string; email: string }) => {
  console.log("IndexPage: Register handler called with:", userData);
  authStore.login(userData);
  showRegisterDialog.value = false;
  $q.notify({
    type: "positive",
    message: `ƒêƒÉng k√Ω th√†nh c√¥ng! Ch√†o m·ª´ng ${userData.name}!`,
    position: "top",
  });
  router.push("/chat");
};

const switchToRegister = () => {
  showLoginDialog.value = false;
  showRegisterDialog.value = true;
};

const switchToLogin = () => {
  showRegisterDialog.value = false;
  showLoginDialog.value = true;
};

const testClick = () => {
  alert("INDEX PAGE TEST BUTTON HO·∫†T ƒê·ªòNG!");
  console.log("IndexPage test button clicked!");
};

const doLogin = () => {
  console.log("IndexPage doLogin called!");
  handleLogin({ name: "Ph∆∞·ªõc Th√¥ng", email: "phuocthoang@demo.com" });
};
</script>

<style scoped>
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 32px;
}

/* Hero Section */
.hero-section {
  background: linear-gradient(
    90deg,
    rgba(37, 99, 235, 0.1) 100%,
    rgba(109, 40, 217, 0.1) 0%
  );
  padding: 80px 0;
  text-align: center;
}

.hero-icon {
  margin-bottom: 34px;
}

.icon-wrapper {
  display: inline-flex;
  padding: 16px;
  border-radius: 50%;
  background: linear-gradient(90deg, #2563eb 100%, #6d28d9 0%);
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 10px 15px rgba(0, 0, 0, 0.1);
}

.hero-title {
  margin-bottom: 34px;
}

.main-title {
  font-size: 60px;
  font-weight: 700;
  line-height: 60px;
  color: #111827;
  margin: 0 0 6px 0;
}

.sub-title {
  font-size: 60px;
  font-weight: 700;
  line-height: 60px;
  color: #6d28d9;
  margin: 0;
}

.hero-description {
  font-size: 20px;
  color: #4b5563;
  text-align: center;
  line-height: 32.5px;
  max-width: 732px;
  margin: 0 auto 34px auto;
}

.cta-buttons {
  display: flex;
  justify-content: center;
  gap: 16px;
  margin-bottom: 50px;
}

.primary-btn {
  background:
    linear-gradient(0deg, #8457ff 0%, #8457ff 100%),
    linear-gradient(90deg, #2563eb 100%, #6d28d9 0%);
  color: white;
  padding: 8px 32px;
  font-size: 18px;
  font-weight: 600;
  border-radius: 6px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 10px 15px rgba(0, 0, 0, 0.1);
}

.secondary-btn {
  background: white;
  color: #5b21b6;
  border: 2px solid #e9d5ff;
  padding: 8px 32px;
  font-size: 18px;
  font-weight: 600;
  border-radius: 6px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 10px 15px rgba(0, 0, 0, 0.1);
}

.stats-section {
  display: flex;
  justify-content: center;
  gap: 24px;
}

.stat-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.stat-icon {
  display: flex;
  padding: 8px;
  border-radius: 50%;
  background: #ede9fe;
}

.stat-number {
  font-size: 30px;
  font-weight: 700;
  color: #111827;
  line-height: 36px;
}

.stat-label {
  font-size: 16px;
  font-weight: 500;
  color: #4b5563;
  line-height: 24px;
}

/* Features Section */
.features-section {
  background: white;
  padding: 80px 0;
}

.section-header {
  text-align: center;
  margin-bottom: 64px;
}

.section-title {
  font-size: 36px;
  font-weight: 700;
  color: #111827;
  line-height: 40px;
  margin: 0 0 16px 0;
}

.section-description {
  font-size: 20px;
  color: #4b5563;
  line-height: 28px;
  margin: 0;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 24px;
}

.feature-card {
  border-radius: 8px;
  box-shadow:
    0 4px 6px rgba(0, 0, 0, 0.1),
    0 10px 15px rgba(0, 0, 0, 0.1);
}

.feature-content {
  text-align: center;
  padding: 24px;
}

.feature-icon {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 56px;
  height: 56px;
  margin: 0 auto 22px auto;
  border-radius: 50%;
  background: linear-gradient(90deg, #eff6ff 100%, #f5f3ff 0%);
}

.feature-title {
  font-size: 20px;
  font-weight: 700;
  color: #111827;
  line-height: 28px;
  letter-spacing: -0.5px;
  margin: 0 0 16px 0;
}

.feature-description {
  font-size: 14px;
  color: #4b5563;
  line-height: 22.75px;
  margin: 0;
}

/* How It Works Section */
.how-it-works-section {
  background: linear-gradient(90deg, #eff6ff 100%, #f5f3ff 0%);
  padding: 80px 0;
}

.steps-container {
  display: flex;
  justify-content: center;
  gap: 32px;
}

.step-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  max-width: 360px;
}

.step-number {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: linear-gradient(90deg, #2563eb 100%, #6d28d9 0%);
  color: white;
  font-size: 24px;
  font-weight: 700;
  margin-bottom: 21px;
}

.step-title {
  font-size: 20px;
  font-weight: 700;
  color: #111827;
  line-height: 28px;
  margin: 0 0 21px 0;
}

.step-description {
  font-size: 16px;
  color: #4b5563;
  line-height: 24px;
  margin: 0;
}
</style>
